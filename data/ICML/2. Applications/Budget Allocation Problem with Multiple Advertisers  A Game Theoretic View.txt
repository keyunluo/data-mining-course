Budget Allocation Problem with Multiple Advertisers: A Game Theoretic View

Takanori Maehara1,4
Akihiro Yabe2,4
Ken-ichi Kawarabayashi3,4
1
Shizuoka University, 2 NEC Corporation, 3 National Institute of Informatics
4
JST, ERATO, Kawarabayashi Large Graph Project

Abstract
In marketing planning, advertisers seek to maximize the number of customers by allocating
given budgets to each media channel effectively.
The budget allocation problem with a bipartite
influence model captures this scenario; however,
the model is problematic because it assumes
there is only one advertiser in the market. In reality, there are many advertisers which are in conflict of advertisement; thus we must extend the
model for such a case.
By extending the budget allocation problem with
a bipartite influence model, we propose a gametheoretic model problem that considers many advertisers. By simulating our model, we can analyze the behavior of a media channel market, e.g.,
we can estimate which media channels are allocated by an advertiser, and which customers are
influenced by an advertiser.
Our model has many attractive features. First,
our model is a potential game; therefore, it has a
pure Nash equilibrium. Second, any Nash equilibrium of our game has 2-optimal social utility,
i.e., the price of anarchy is 2. Finally, the proposed model can be simulated very efficiently;
thus it can be used to analyze large markets.

MAEHARA . TAKANORI @ SHIZUOKA . AC . JP
A - YABE @ CQ . JP. NEC . COM
K KENITI @ NII . AC . JP

This problem can be formulated as follows: Suppose we
have estimates for the extent to which marketing channels
can influence customer decisions and convert potential customers into loyal buyers. We would like to market a new
product that may possibly be adopted by a large fraction
of the customers. How should we choose the appropriate
marketing channels?
Alon et al. (2012) were the first to model this channel market. Consider a bipartite graph in which one side is the set
of media channels and the other is the customers. Each
edge between a channel and a customer indicates that the
customer is influenced via the channel with some probability that depends on the budget allocated to that channel. The maximization of the expected number of influenced customers under some budget constraint can be formulated as a combinatorial optimization problem. This optimization problem can be developed in the general submodularity framework. More precisely, it can be formulated as knapsack-constrained monotone submodular function maximization problem on the integer lattice. Thus a
polynomial time (1 − 1/e)-approximation algorithm can
be obtained by a greedy algorithm with partial enumeration (Alon et al., 2012; Soma et al., 2014); see Section 3.
This model and its extensions are studied in the area of
computational advertising (Ieong et al., 2014; Geyik et al.,
2014; Hatano et al., 2015).
1.2. Motivation

1. Introduction
1.1. Background
Marketing is used by advertisers to create loyal customers.
A major decision problem in marketing planning is the allocation of budgets to media channels (e.g., TV, newspaper, billboards, and websites) efficiently to maximize the
number of influenced customers under some constraints.
Proceedings of the 32 nd International Conference on Machine
Learning, Lille, France, 2015. JMLR: W&CP volume 37. Copyright 2015 by the author(s).

In reality, there are many advertisers with comparable
products in a channel market, and they compete to convert
potential customers into as many loyal buyers as possible.
Market analysts (often controlled by publishers or advertisers) analyze such a complicated market. Major tasks
of analysts are to simulate/predict the market to acquire
an insight, and to propose a strategy for a market planning (Broder & Josifovski, 2011). In particular, they wish
to estimate the media channels that are allocated by advertisers and the number of customers that are influenced by

Budget Allocation Problem with Multiple Advertisers

each advertiser. Since the model proposed in (Alon et al.,
2012) only deals with a single advertiser, analysts need a
market model that deals with many advertisers. This is the
main motivation of our paper.
As mentioned above, many advertisers are competing, and
they want to convert as many potential customers into loyal
buyers as possible via media channels. In this case, each
advertiser would adopt his own strategy independent of his
competitors’ marketing strategies. Thus we need to develop a network equilibrium framework that considers the
reality of competition among multiple advertisers through
media channels.
For this purpose, it makes sense to adopt game-theoretic
analysis; we regard a media channel market as a game in
which advertisers act as the players of the game. The goal
of each player is to maximize his utility (the number of
influenced customers). Here, we assume that each player
knows the influence probability of all other players, i.e., we
here consider a complete information game. This assumption is reasonable when there are sufficiently many transaction logs of the market to construct models of players.
Moreover, we here assume that each player is rational and
selfish, i.e., he chooses a strategy that (approximately) maximizes his utility. This assumption is, in particular, reasonable for online advertising and internet auctions (Varian,
2007; Zhao & Nagurney, 2008) since many advertisers use
computer programs in these markets (Yuan et al., 2013). In
this setting, game theory provides a rich theory for analyzing a game.
1.3. Contribution
We propose a game-theoretic model of a media channel
market with n advertisers and discuss its properties. We
offer the following theoretical contributions.

• Finding a pure Nash equilibrium is NP-hard. Thus we
consider an approximate Nash equilibrium and prove
that it can be found in polynomial time. We also give a
bound of the approximate price of anarchy (Section 7).
• We conduct numerical experiments with synthetic and
real datasets. We observe that the approximate bestresponse dynamics converges in only a few rounds,
and the social utility of the obtained solution is very
close to the social optimal. These are much better than
theory. Thus, our model has a capability of analyzing
large markets, which will appear in online advertising
and internet auctions (Section 8).
All omitted proofs will be given in Appendix A in the supplementary material.

2. Notation
In this section, we first introduce game theoretical notions
and submodularity.
2.1. Game theory
We first define a (non-cooperative) game. Let n ∈ Z>0
be the number of players and let [n] = {1, . . . , n}
be the set of players. An n-player game in strategic
form (Nisan et al., 2007) (a “game” for short) is a tuple
([n], {Di }i∈[n] , {fi }i∈[n] ), where Di is a set of strategies
for player i, and fi : D → R is a utility function of player
i, where D = D1 ×· · ·×Dn is the set of all possible configurations. The goal of player i is to find a strategy xi ∈ Di
to maximizes his utility function fi . For notational convenience, when there is no fear of confusion, we denote by
g(xi , x−i ) the value of function g : D → R when player
i selects a strategy xi and other players select strategies
x−i = (x1 , . . . , xi−1 , xi+1 , . . . , xn ).

• We propose a game-theoretic model of a channel media market with n advertisers, which is an extension of the budget allocation problem presented in
(Alon et al., 2012). We call this model the budget
allocation game with bipartite influence model (Section 4).
• We show that the game has a pure Nash equilibrium.
This is a desirable property for a market model. To
prove this property, we show that the game is a potential game (Section 5).
• The social utility of any pure Nash equilibrium is 2optimal. Furthermore, there exists a Nash equilibrium
of min{Hn , 2}-optimal, where Hn = 1 + 1/2 + · · · +
1/n is the n-th harmonic number. We give an asymptotically tight example for these results (Section 6).

A configuration x ∈ D is a (pure) Nash equilibrium (Nash,
1950) if it satisfies

To show the practical usefulness of our model, we also discuss the computational perspective.

for all x, y ∈ ZS where ∨ denotes the element-wise
maximum and ∧ denotes the element-wise minimum:

fi (xi , x−i ) ≥ fi (x′i , x−i )

(1)

for all x′i ∈ Di . Nash equilibrium is the most commonlyused notion of equilibrium in game theory, and in general, a game does not necessarily have a pure Nash equilibrium. See (Nisan et al., 2007) for more details of algorithmic game theory.
2.2. Submodular function on integer lattice
Let S be a finite set. A function f : ZS → R is submodular
on the integer lattice (“submodular”) if it satisfies
f (x) + f (y) ≥ f (x ∨ y) + f (x ∧ y)

(2)

Budget Allocation Problem with Multiple Advertisers

(x ∨ y)(s) = max{x(s), y(s)} and (x ∧ y)(s) =
min{x(s), y(s)}. A function f : ZS → R is monotone
nondecreasing if it satisfies
f (x) ≤ f (y)

(3)

for all x ≤ y, i.e., x(s) ≤ y(s) (s ∈ S). A function
f : ZS → R satisfies component-wise concavity (Shioura,
2009; Milgrom & Strulovici, 2009) if it satisfies
f (x + es ) − f (x) ≥ f (x + 2es ) − f (x + es )

3. Budget allocation problem
Here, we review the budget allocation problem with a bipartite influence model, which is proposed by Alon et
al. (2012) and extended by Soma et al. (2014). We discuss a game-theoretic extension of this model in the next
section.
Let G = (S ∪ T, E) be a bipartite graph, where the left vertices S denote media channels, the right vertices T denote
customers, and the edges E ⊆ S × T denote the relations
between channels and customers. Each edge (s, t) ∈ E
has an activation probability p(s, t) ∈ [0, 1] such that customer t ∈ T is activated via channel s ∈ S with probability
p(s, t).
Suppose that an advertiser has a budget of B ∈ Z≥0 units.
If x(s) ∈ Z≥0 units are allocated for channels s ∈ S, then
customer t ∈ T is activated by the advertiser with probability
Y
x(s)
P (x, t) = 1 −
(1 − p(s, t))
,
(5)
s∈Γ(t)

where Γ(t) = {s ∈ S : (s, t) ∈ E} denotes the neighbor of
t ∈ T . Thus, the expected number of activated customers
by the advertiser f (x) is given by
X
f (x) =
P (x, t)
t∈T

=

t∈T



1 −

Y

s∈Γ(t)

(1 − p(s, t))



x(s) 

.

(6)

The purpose of advertiser is to maximize f (x) under budget constraints, which is specified as follows. Let c(s) ∈
1

maximize
subject to

This property is also called diminishing marginal return property (Soma et al., 2014).
“Submodularity with
component-wise concavity” is called directional concavity (Shaked & Shanthikumar, 1990), which was originally studied
by Rüschendorf (1983).

fX
(x)
w(s)x(s) ≤ B,

(7)

s∈S

(4)

for all s ∈ S, where es is the s-th unit vector.1 See (Topkis,
1998) for more details of submodular function defined on
the lattice.

X

Z≥0 be a capacity of channel s ∈ S and w(s) ∈ Z≥0 be
an allocation cost of channel s ∈ S. These denote that the
channel s can be allocated at most c(s) units and the cost of
allocating an unit is w(s). The advertiser wants to allocate
the budgets to each channel under the capacity and the cost
constraints. Thus his/her problem is given as the following.

0 ≤ x(s) ≤ c(s).

The function f defined by (6) is a monotone submodular function on the integer lattice and satisfies componentwise concavity (Soma et al., 2014). For a general monotone submodular function f with component-wise concavity, the problem (7) is NP-hard. Moreover, it is NP-hard
to obtain better than (1 − 1/e)-approximate solution of the
problem (Alon et al., 2012). Thus we are interested in approximation algorithms.
Alon et al. proposed two polynomial time algorithms for
the problem (7). The first algorithm is a (1 − 1/e) approximation algorithm, which is an integer lattice version
of Sviridenko (2004). This algorithm combines a partial enumeration and a greedy procedure; it first enumerates all feasible assignments of cardinality at most three,
and then performs greedy procedure (Algorithm 1) from
these assignments. Since the number of initial assignments is O(|S|3 B 3 ) and the greedy procedure terminates
at most |S|B iterations, the complexity of this algorithm is
O(γ|T ||S|4 B 4 ), where γ is the complexity of evaluating
P (x, t). Soma et al. (2014) extended this algorithm for a
general monotone submodular function on the integer lattice.
Even though the above algorithm runs in polynomial time,
in practice, it is not scalable for large instances due to
its expensive exponent. The second algorithm of Alon et
al. (2012) is a more efficient but less accurate algorithm.
The algorithm first performs a greedy procedure (Algorithm 1) from empty assignment x = 0, and then compares the obtained solution with all feasible assignments of
cardinality one. This procedure gives a (1/2)(1 − 1/e) approximation solution in O(γ|T ||S|B) time. Note that this
algorithm can be immediately extend to a general submodular function on the integer lattice with component-wise
concavity.

4. Proposed model
In this section, we propose a game-theoretic extension of
the budget allocation problem. Some possible extensions
of the model are discussed in Section 9.
Suppose that there are n advertisers in a market. We here
define a game, and regard these advertisers as the players

Budget Allocation Problem with Multiple Advertisers

Algorithm 1 Greedy procedure for maximizing monotone
submodular function with component-wise concavity under a knapsack constraint (Alon et al., 2012).
1: loop
2:
s∗ P
∈ argmaxs {(f (x+es )−f (x))/w(s) : x(s) ≤ c(s)−
1, s′ ∈S w(s′ )x(s′ ) ≤ B − w(s)}
3:
if NO such s∗ then return x as a solution
4:
x(s∗ ) ← x(s∗ ) + 1
5: end loop

Algorithm 2 Activating customer t by the random ordering
rule.
1: Draw a random permutation σ ∈ Sn
2: for k = 1, . . . , n do
3:
Player σ(k) tries to activate customer t with probability Pσ(k) (xσ(k) , t)
4:
if The challenge is succeeded then break
5: end for
of the game. Similar to the budget allocation problem, we
consider a bipartite graph G = (S ∪ T, E), where S denotes the set of channels and T denotes the set of customers. Each player i ∈ [n] has activation probability
pi : E → [0, 1], budget Bi ∈ Z≥0 , channel capacity
ci : S → Z≥0 , and allocation cost wi : S → Z≥0 . The
set of feasible strategies of player i is expressed as follows:
X
Di = {xi ∈ Z|S| :
wi (s)xi (s) ≤ Bi ,
s∈S

0 ≤ xi (s) ≤ ci (s) (s ∈ S)}.

(8)

The purpose of each player (advertiser) is to find a feasible allocation xi ∈ Di for maximizing the number of his
customers.
Defining a game-theoretic extension of the budget allocation problem requires an activation rule, i.e., when many
advertisers with comparable products simultaneously approach the same customer t ∈ T , we must specify which
advertiser successfully activates that customer. We propose
the following rule, which we refer to as the random ordering rule. First, we define the contribution of advertiser i
as
Y
x (s)
Pi (xi , t) = 1 −
(1 − pi (s, t)) i .
(9)

each player j ∈ [n] allocates xj ∈ Dj . In the random
ordering rule, we can obtain the the closed form of fi as
follows:
Y
1 X X
fi (x) =
Pi (xi , t)
(1 − Pj (xj , t)), (10)
n!
j≺ i
t∈T σ∈Sn

σ

where i ≺σ j indicates that i appears before j in σ.
The tuple ([n], {fi }i∈[n] , {Di }i∈[n] ) defines a game. We
call this the budget allocation game with a bipartite influence model. We propose this game for a model of a media
channel market with many advertisers.
Intuitively, this model (random ordering rule) corresponds
to the following customer’s action: Imagine a customer
who wants to buy a PC. Today he obtains many flyers
from PC manufactures (advertisers) via media channels.
He starts examining these manufactures sequentially, and
when he identifies a desirable PC, he immediately purchases the PC and stops examining the other makers. If the
examination order is random, the customer’s actions correspond to the proposed model.
We here give a basic property of the utility functions.
Proposition 1. Each utility function fi (xi , x−i ) is a monotone nondecreasing submodular function with componentwise concavity with respect to xi ∈ Di .

5. Existence of pure Nash equilibria
Existence of pure Nash equilibria is a desirable property of
a market model, in particular, for market analysts. When a
current configuration is not a Nash equilibrium, each player
may change his strategy to improve his utility. Therefore, if
market analysts want to propose a strategy for advertisers,
a market model should be a Nash equilibrium.
Here, we show that a budget allocation game has a
pure Nash equilibrium. To prove this, we introduce
the notion of a potential game. A game is a potential
game (Monderer & Shapley, 1996) if there exists a function Φ : D → R such that for all i ∈ [n],
fi (x′i , x−i ) − fi (xi , x−i ) = Φ(x′i , x−i ) − Φ(xi , x−i ).
(11)

s∈Γ(t)

Note that (9) coincides with the activation probability when
the other advertisers are ignored. For each customer t ∈ T ,
we draw a permutation σ ∈ Sn uniformly at random, where
Sn denotes the set of all permutations of [n]. Then, according to permutation σ, each player sequentially attempts to
activate customer t. The formal description is given in Algorithm 2.
The utility function fi (x1 , . . . , xn ) of player i ∈ [n] is the
number of expected customers activated by player i when

Function Φ is called a potential of the game. The potential
is unique up to a constant difference (Monderer & Shapley,
1996). The most important property of a potential game is
that it must have a pure Nash equilibrium. In fact, by (11),
the maximum potential feasible solution is a Nash equilibrium.
We show that our game is also a potential game; thus it has
a pure Nash equilibrium.
Proposition 2. A budget allocation game is a potential

Budget Allocation Problem with Multiple Advertisers

Algorithm 3 Best response dynamics.

Here we show that the price of anarchy of the budget allocation game is at most 2. To show this, we prove that our
game is a monotone utility game. A game is a monotone
utility game on the integer lattice if it satisfies the following three conditions.

1: Set arbitrary initial solutions xi ∈ Di , i ∈ [n]
2: repeat
3:
for i ∈ [n] do
4:
Compute xi ∈ argmax{fi (yi , x−i ) : yi ∈ Di }
5:
if fi (yi , x−i ) > fi (xi , x−i ) then Update xi ← yi
6:
end for
7: until no update is performed

game with potential function
Φ(x) =

X X

t∈T ∅6=I⊆[n]

(−1)|I|−1 Y
Pi (xi , t).
|I|

(12)

i∈I

Corollary 3. A budget allocation game has a pure Nash
equilibrium.
The proof of Proposition 2 will be given in Appendix A.
A Nash equilibrium of a potential game can be found by the
best-response dynamics (Algorithm 3) in a finite number of
iterations (Monderer & Shapley, 1996). This implies that,
in our model, a market tends to be a Nash equilibrium.

6. Quality of Nash equilibrium
As discussed in the previous section, our budget allocation
game has a pure Nash equilibrium. In this section, we analyze the quality of pure Nash equilibria. We define social
utility as the sum of the utilities of all advertisers.
F (x) =f1 (x) + · · · + fn (x)
=

X
t∈T

1−

n
Y

i=1

!

(1 − Pi (xi , t)) .

(13)

The social utility F (x) is the expected number of customers activated by some advertiser. Market analysts
sometimes desire a strategy for advertisers to obtain a large
social utility. However, as mentioned in the previous section, advertisers would not accept a configuration that is
not a Nash equilibrium. Therefore we are interested in the
social utility at a Nash equilibrium. To measure this, we
adopt the price of anarchy and the price of stability.
Price of Anarchy The ratio between the best
social utility and the worst social utility under
Nash equilibria is referred to as the price of anarchy (Koutsoupias & Papadimitriou, 1999), which is
expressed as
PoA =

max{F (x) : x ∈ D}
.
min{F (x) : x is a Nash}

Since a market tends to a Nash equilibrium, at least PoAoptimal customers are naturally activated. Thus, if PoA is
close to one, we can say that the market is efficient.

1. F (x) is a nondecreasing submodular function on the
integer lattice, and satisfies component-wise concavity.
Pn
2. F (x) ≥ i=1 fi (x).2
3. fi (x) ≥ F (xi , x−i ) − F (0, x−i ).
Note that utility games are originally defined on set functions (Vetta, 2002). Here we extend this concept to a game
on the integer lattice. We first show that the price of anarchy of a monotone utility game is at most 2.
Proposition 4. The price of anarchy of a monotone utility
game on the integer lattice is at most 2.
Proposition 4 is an integer lattice version of Theorem 5 presented by Vetta (2002). This proof (which will be given in
Appendix A) requires component-wise concavity.
We can show that the budget allocation game is a monotone
utility game on the integer lattice. Therefore, by Proposition 5 below (whose proof will be given in Appendix A),
we can show that the price of anarchy of the game is at
most 2.
Proposition 5. The budget allocation game is a monotone
utility game on the integer lattice.
Corollary 6. The price of anarchy of the budget allocation
game is at most 2.
Price of Stability There is another quality measure,
called the price of stability (Anshelevich et al., 2008). The
price of stability is the ratio between the best social utility
and the best social utility under Nash equilibria:
PoS =

max{F (x) : x ∈ D}
.
max{F (x) : x is a Nash}

When the price of stability is close to one, there is an acceptable configuration with possibly many activated customers. Thus market analysts can propose this configuration to advertisers to obtain a large social utility.
By definition, the price of stability is at most the price of
anarchy. We can slightly improve this bound.
Proposition 7. The price of stability of a budget allocation
game is at most max{Hn , 2}, where Hn is the harmonic
number, Hn = 1 + 1/2 + · · · + 1/n.
2

Since we defined social utility as the sum of the players’ utility, condition 2) is satisfied. However, we define a basic utility
game for a more general situation.

Budget Allocation Problem with Multiple Advertisers

s1 t p = 1, 1, 1

for all x′i ∈ Di . For market analysis, an approximate Nash
equilibrium has the following meaning: Since maximizing
fi is NP-hard, it makes sense to assume that

t t1

s2 t p = 0, 1/3 − ǫ, 0 t t2
s3 t p = 0, 0, 1/3 − ǫ t t3

each advertiser adopts an (η, ǫ)-approximation
algorithm to improve his strategy.

Figure 1. Asymptotically tight example for PoA and PoS.

Algorithm 4 Approximate best response dynamics.
1: Set arbitrary initial solutions xi ∈ Di , i ∈ [n]
2: repeat
3:
for i ∈ [n] do
4:
Find an η-approximate solution yi of the problem
max{fi (yi , x−i ) : yi ∈ Di }.
5:
if fi (yi , x−i ) > fi (xi , x−i ) + ǫ then Update xi ← yi
6:
end for
7: until no update is performed

Note that H2 = 1.5, H3 ≈ 1.833, and H4 ≈ 2.083. Thus
the above proposition (whose proof will be given in Appendix A) improves the bound for n ≤ 3.
Example 8. A bipartite graph G = (S ∪ T, E) is defined
by n parallel lines, i.e., S = [n], T = [n], and E = {(i, i) :
i ∈ [n]}. The edge probability is defined by


1,
pi (j, j) = 1/n − ǫ,


0,

j = 1,
j = i(6= 1),
otherwise.

(14)

Figure 1 shows the case for n = 3. Each i ∈ S has unit
cost and unbounded capacity, and each player has an unit
budget.
In this instance, the social optimal solution is xi = ei for
all i ∈ [n], and the corresponding social utility is 2 − 1/n.
On the other hand, a solution xi = e1 for all i ∈ [n] is
a unique Nash equilibrium. and the corresponding social
utility is 1. Therefore PoA = PoS = 2 − 1/n. By tending
n → ∞, we have PoA = PoS → 2, i.e., it is a tight example
for Propositions 6 and 7.

7. Approximate Nash equilibrium
In the previous sections, we considered only the theoretical
perspective. Here, we consider the computational perspective.
Computing a Nash equilibrium is at least as hard as the budget allocation problem (7); thus it is NP-hard. Therefore
we are interested in approximation algorithms. A configuration x ∈ D is an (η, ǫ)-approximate Nash equilibrium if
it satisfies
fi (xi , x−i ) ≥ ηfi (x′i , x−i ) − ǫ.

(15)

In such a case, each advertiser may not change his strategy
when the current strategy is an approximate Nash equilibrium, i.e., an approximate Nash equilibrium is an acceptable configuration for all advertisers.
We can find an approximate Nash equilibrium in polynomial number of iterations by approximate best response dynamics (Algorithm 4). This also implies that, in our model
with (15), a market tends to be an approximate Nash equilibrium.
Proposition 9. For an arbitrary ǫ > 0, the best response
dynamics finds an (η, ǫ)-approximate Nash equilibrium in
|T |Hn /ǫ rounds (lines 2–9).
If we use a polynomial time approximation algorithm for
line 4, each round of the approximate best response dynamics requires polynomial number of utility functions evaluations. It should be mentioned that, in (10), the utility
function fi has O(n!) terms. Thus the naive computation
requires O(n!) time. However, we can reduce this factor
to O(n(log n)2 ) by using a divide-and-conquer algorithm
with the fast Fourier transform.
Proposition 10. For each i ∈ [n], fi (x) can be computed
in O(|E|n + |T |n(log n)2 ) time.
If we adopt the η = (1/2)(1 − 1/e) approximation
algorithm (mentioned in Section 3) in line 4 of Algorithm 3, we can implement Algorithm 3 in O(B|S||E|n +
B|S||T |n(log n)2 ) time per round; see the proof of Proposition 10 in Appendix A.
Finally, we give a bound for the approximate price of anarchy. Again, the proof will be given in Appendix A.
Proposition 11. Let x∗ ∈ D be the optimal social utility
allocation. For any (η, ǫ)-approximate Nash equilibrium
x ∈ D, we have


ǫn
1
∗
F (x) + .
F (x ) ≤ 1 +
η
η
This shows if each player uses η = 1 − 1/e approximation
algorithm for maximizing his utility, the approximate price
of anarchy is about 1 + 1/(1 − 1/e) ≈ 2.58. If each player
uses η = (1/2)(1 − 1/e) approximation algorithm, the approximate price of anarchy is about 1+2/(1−1/e) ≈ 4.16.

8. Experiments
Here, we demonstrate the practical usefulness of the proposed model through numerical experiments.

40
30
20
10
0

Social utility

Frequency

Budget Allocation Problem with Multiple Advertisers

123456789
Number of rounds to converge
(a)

2,000
1,500
1,000
500
0

1 2 3 4 5
Number of rounds
(b)

Figure 2. Number of rounds to converge.

For efficient computation, we adopt the (1/2)(1 − 1/e) approximation algorithm for line 4 in Algorithm 3, as mentioned right after Proposition 10. Furthermore, by using
a naive algorithm, instead of the fast Fourier transform in
evaluating fi (see the proof of Proposition 10 in Appendix),
the complexity per round becomes O(B|S||T |n2 ).
All experiments were conducted on an Intel Xeon E52690 2.90GHz CPU with 256GB memory running Ubuntu
12.04. Our algorithm was implemented in C++ and was
compiled using g++v4.6 with the -O3 option.
8.1. Typical behavior
We first show the typical behavior of the algorithm. We
generated 100 random bipartite graphs which has |S| =
100 and |T | = 10000 vertices, and each t ∈ T has 20
random edges. We set n = 10 players, and choose each
player’s budgets and the influence probabilities such that
1/5 of the customers will be activated. We performed our
approximate best response dynamics with ǫ = 0.999.
We observed that the dynamics converges in a few rounds.
Figure 2 (a) shows the histogram of the number of rounds to
converge. Most instances are converged in four rounds, and
only a few instances require more than four founds (but at
most seven rounds). To observe the precise behavior of the
algorithm, we select one instance that requires five rounds
and plot the social utility for each rounds. The result is
shown in Figure 2 (b). This shows the process almost converges at the first round and it requires additional rounds
for minor improvements.
We also performed similar experiments with other parameters and random graph models (e.g., random power-law
graphs); however we obtain similar results for all experiments (see: Appendix B). Thus we conclude that this is a
typical behavior of our model.

Table 1. Computational time (per round) in real datasets.
dataset
|S|
|T |
n
time/round
open1
541
4271
20
24 s
757
5062
20
40 s
open2
movielens 100k
944
1683
10
3s
movielens 1m
6040
3706
10
44 s
movielens 10m 69878
10677
10
1621 s
user-tag
17122
82035
5
518 s
12177 495402
5
4728 s
user-picture
tag-picture
82035 495402
5
18780 s

1. open-advertising-dataset3 (open1, open1).
The
dataset consists of click-query logs of a search engine.
2. MovieLens dataset4 (movielens 100k, movielens 1m,
and movielens 10m). MovieLens5 is a web-based recommender system. The dataset consists of the rating
of movies by users on MovieLens.
3. vi.sualize.us dataset6 (user-tab, user-picture, and usertag). vi.sualize.us7 is a social bookmarking service
for pictures. The dataset consists of bipartite graphs
between two of users, tags, and pictures.
We construct bipartite graphs from these dataset. Budgets
and influence probabilities of players are determined similarly as the experiment in Section 8.1. The results are
summarized in Table 1. For each instance, the number of
rounds for converge performs similar to the experiment in
Section 8.1, i.e., the model converges in a few iterations.
This shows our model can be efficiently simulated in large
real datasets.
8.3. Approximate vs exact maximization
In our model, we assumed that each player approximately
maximizes his utility. We here verify whether the exact
maximization improves this utility.
Since the exact maximization requires exhaustive search,
which is very expensive, we used a small instance for this
experiment. We generated 100 random bipartite graphs
with |S| = 10 and |T | = 100 vertices, and each t ∈ T
has 5 edges. We set n = 2 players. Other conditions are
the same as the experiments in Section 8.1.
In this setting, the ratio between a player’s utility when all
players use the approximate maximization and when they
use the exact maximization is contained in [0.990, 1.008]
(see Appendix B for more details). This means the approx3

https://code.google.com/p/open-advertising-dataset/
http://grouplens.org/datasets/movielens/
5
http://movielens.umn.edu/
6
http://konect.uni-koblenz.de/networks/pics ti
http://konect.uni-koblenz.de/networks/pics ut
http://konect.uni-koblenz.de/networks/pics ui
7
http://vi.sualize.us/
4

8.2. Scalability
We then discuss the scalability of our algorithm. We performed experiments for real datasets. We here adopt the
following datasets.

Budget Allocation Problem with Multiple Advertisers

imate maximization is enough to evaluate the quality of solutions, which can be very efficiently computed.
8.4. Experimental value of price of anarchy
Finally, we evaluate the quality of the obtained social utility. Proposition 11 shows that the approximate price of anarchy is at most 1 + 1/η = 4.16. We here compare this
value with the social utility of the obtained solution. Here,
we used the same instances in Section 8.3.
In this experiment, the ratio of the optimal social utility,
obtained by exhaustive search and the obtained solution is
at most 1.006, which is significantly better than the theory
(see Appendix B). In fact, it is significantly better than the
exact price of anarchy (= 2). This implies that, in our experiments, we can find an approximate Nash equilibrium
which is very close to the social optimal solution.

9. Extension of the model
In this section, we discuss a possible generalization of our
proposed model. In our theory, we have only used the property that Pi (xi , t) is a monotone nondecreasing submodular function with component-wise concavity. Thus, we
can extend the proposed model for any probability function
Pi (X, t) that satisfies this property, instead of (9).
One important example is the nonincreasing influence
probability model introduced by Soma et al. (2014). In
this model, each activation probability pi (e) is extended to
(1)
(2)
nondecreasing probabilities pi (e) ≥ pi (e) ≥ · · · , and
Pi (xi , t) is extended to
Pi (xi , t) :=

Y x(s)
Y
(k)
(1 − pi (s, t)).

(16)

s∈Γ(t) k=1

This model captures real-world marketing phenomena, i.e.,
the effectiveness of activating a target customer may decrease in multiple trials.

10. Related work
This paper has discussed a game-theoretic extension of the
budget allocation problem. To the best of our knowledge,
this is the first game-theoretic extension of the problem. On
the other hand, there are some game-theoretic models of
the influence maximization problem (Kempe et al., 2003),
which deals with information spreads over non-bipartite
graphs. Here, we briefly review these models and discuss
the relation with our model.
The first game-theoretic model of the influence maximization problem is proposed by Bharathi, Kempe, and
Salek (2007). In their model, each player initially selects
seed vertices. Then the diffusion process is performed as

same as the independent cascading model of the influence
maximization problem. When a vertex u is simultaneously
activated by many players, it belongs to one of the activated
players. They proved that the price of anarchy of this model
is at most 2.
Alon et al. (2010) studied a model in which if many players simultaneously approach a vertex i, they “cancel out.”
They showed that, if the diameter of an underlying graph
is at most 2 (which seems very restrictive), then the game
has a pure Nash equilibrium. They also showed that the
price of anarchy of their game is at most 2. Tzoumas and
Amanatidis (2012) extended this model and discussed the
condition of existence of a pure Nash equilibrium.
Goyal and Kearns (2012) proposed a general influence
model that is specified by a function, called a switching
function, which generalizes the linear threshold model in
the influence maximization problem (Kempe et al., 2003).
He and Kempe (2013) analyzed this model and proved that
the price of anarchy is at most 2.
By comparing these existing results, the largest advantage
of our model is that it has a pure Nash equilibrium. As
mentioned in Section 5, this is a desirable property for a
market model.

11. Conclusion
In this paper we have proposed a model for a media channel
market with many advertisers, which is a game-theoretic
extension of the budget allocation problem presented by
Alon et al. (2012). The proposed model has the following attractive features: 1) it has a pure Nash equilibrium,
2) both the price of anarchy and the price of stability can
be estimated, and 3) it can be efficiently simulated. We
conducted numerical experiments to demonstrate that the
model can be applied to a large scale market.
There are some possible future works. First, we here assumed that each player knows the influence probabilities
of all other players. This makes our model a complete information game, which is easy to analyze. Extending this
model to an incomplete information game is perhaps important future work. Second, we here assumed that an ordering of players is uniformly random, which is the key
of Proposition 2. Introducing distributions over the orderings is a natural extension of the model; however, in this
model, Proposition 2 does not hold, i.e., the existence of
Nash equilibrium is non-trivial. Analyzing this extended
model is interesting future work. Finally, in the experiments in Section 8.4, we have obtained an approximate
Nash equilibrium which is very close to the social optimal
solution. Exploiting the reason of this phenomenon seems
practically important work.

Budget Allocation Problem with Multiple Advertisers

References
Alon, Noga, Feldman, Michal, Procaccia, Ariel D, and
Tennenholtz, Moshe. A note on competitive diffusion
through social networks. Information Processing Letters, 110(6):221–225, 2010.
Alon, Noga, Gamzu, Iftah, and Tennenholtz, Moshe. Optimizing budget allocation among channels and influencers. In Proceedings of the 21st International Conference on World Wide Web, pp. 381–388, 2012.
Anshelevich, Elliot, Dasgupta, Anirban, Kleinberg, Jon,
Tardos, Eva, Wexler, Tom, and Roughgarden, Tim. The
price of stability for network design with fair cost allocation. SIAM Journal on Computing, 38(4):1602–1623,
2008.
Bharathi, Shishir, Kempe, David, and Salek, Mahyar. Competitive influence maximization in social networks. In
Internet and Network Economics, pp. 306–311. 2007.
Broder, Andrei and Josifovski, Venja.
MS&E 239:
Introduction to Computational Advertising, 2011. URL
http://web.stanford.edu/class/msande239/.
Geyik, Sahin Cem, Saxena, Abhishek, and Dasdan, Ali.
Multi-touch attribution based budget allocation in online
advertising. In Proceedings of 20th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, pp.
1–9, 2014.
Goyal, Sanjeev and Kearns, Michael. Competitive contagion in networks. In Proceedings of the 44th annual
ACM Symposium on Theory of Computing, pp. 759–774,
2012.
Hatano, Daisuke, Fukunaga, Takuro, Maehara, Takanori,
and Kawarabayashi, Ken-ichi. Lagrangian decomposition algorithm for allocating marketing channels. In Proceedings of the 29th AAAI Conference on Artificial Intelligence, 2015.
He, Xinran and Kempe, David. Price of anarchy for the
n-player competitive cascade game with submodular activation functions. In Web and Internet Economics, pp.
232–248. 2013.
Ieong, Samuel, Mahdian, Mohammad, and Vassilvitskii,
Sergei. Advertising in a stream. In Proceedings of the
23rd International Conference on World Wide Web, pp.
29–38, 2014.
Kempe, David, Kleinberg, Jon, and Tardos, Éva. Maximizing the spread of influence through a social network.
In Proceedings of the 9th ACM SIGKDD International
Conference on Knowledge Discovery and Data Mining,
pp. 137–146, 2003.

Koutsoupias, Elias and Papadimitriou, Christos. Worstcase equilibria. In Proceedings of the 16th Annual Symposium on Theoretical Aspects of Computer Science, pp.
404–413, 1999.
Li, Jian, Saha, Barna, and Deshpande, Amol. A unified
approach to ranking in probabilistic databases. Proceedings of the VLDB Endowment, 2(1):502–513, 2009.
Milgrom, Paul and Strulovici, Bruno. Substitute goods,
auctions, and equilibrium. Journal of Economic Theory,
144(1):212–247, 2009.
Monderer, Dov and Shapley, Lloyd S. Fictitious play property for games with identical interests. Journal of Economic Theory, 68(1):258–265, 1996.
Nash, John. Equilibrium points in n-person games. Proceedings of the National Academy of Science, 36(1):48–
49, 1950.
Nisan, Noam, Roughgarden, Tim, Tardos, Eva, and Vazirani, Vijay V. Algorithmic game theory. Cambridge University Press, 2007.
Rüschendorf, L. Solution of a statistical optimization problem by rearrangement methods. Metrika, 30(1):55–61,
1983.
Shaked, Moshe and Shanthikumar, J George. Parametric stochastic convexity and concavity of stochastic processes. Annals of the Institute of Statistical Mathematics,
42(3):509–531, 1990.
Shioura, Akiyoshi. On the pipage rounding algorithm for
submodular function maximization view from discrete
convex analysis. Discrete Mathematics, Algorithms and
Applications, 1(01):1–23, 2009.
Soma, Tasuku, Kakimura, Naonori, Inaba, Kazuhiro, and
Kawarabayashi, Ken-ichi. Optimal budget allocation:
Theoretical guarantee and efficient algorithm. In Proceedings of the 31st International Conference on Machine Learning, pp. 351–359, 2014.
Sviridenko, Maxim. A note on maximizing a submodular
set function subject to a knapsack constraint. Operations
Research Letters, 32(1):41–43, 2004.
Topkis, Donald M. Supermodularity and complementarity.
Princeton University Press, 1998.
Tzoumas, Vasileios, Amanatidis, Christos, and Markakis,
Evangelos. A game-theoretic analysis of a competitive
diffusion process over social networks. In Internet and
Network Economics, pp. 1–14. 2012.
Varian, Hal R. Position auctions. International Journal of
Industrial Organization, 25(6):1163–1178, 2007.

Budget Allocation Problem with Multiple Advertisers

Vetta, Adrian. Nash equilibria in competitive societies,
with applications to facility location, traffic routing and
auctions. In Proceedings of the 43rd Annual IEEE Symposium on Foundations of Computer Science, pp. 416–
425, 2002.
Yuan, Shuai, Wang, Jun, and Zhao, Xiaoxue. Real-time
bidding for online advertising: measurement and analysis. In Proceedings of the 7th International Workshop on
Data Mining for Online Advertising, pp. 3:1–3:8, 2013.
Zhao, Lan and Nagurney, Anna. A network equilibrium
framework for internet advertising: Models, qualitative
analysis, and algorithms. European Journal of Operational Research, 187(2):456–472, 2008.

